# Tag Initialization Architecture - Visual Guide

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STATIC DEFINITIONS (Backend)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  backend/tags.py:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  TAGS_BY_CATEGORY  â”‚  â”‚ DIMENSION_WEIGHTSâ”‚  â”‚    DIMENSIONS      â”‚     â”‚
â”‚  â”‚                    â”‚  â”‚                  â”‚  â”‚                    â”‚     â”‚
â”‚  â”‚ "tone" â†’ [         â”‚  â”‚ "empathetic" â†’   â”‚  â”‚ "empathy" â†’        â”‚     â”‚
â”‚  â”‚   empathetic       â”‚  â”‚   {empathy: 0.8, â”‚  â”‚   {min: 0.0,       â”‚     â”‚
â”‚  â”‚   respectful       â”‚  â”‚    aggressivenessâ”‚  â”‚    max: 1.0,       â”‚     â”‚
â”‚  â”‚   inflammatory     â”‚  â”‚    -0.3}         â”‚  â”‚    default: 0.5}   â”‚     â”‚
â”‚  â”‚   dismissive       â”‚  â”‚                  â”‚  â”‚                    â”‚     â”‚
â”‚  â”‚ ]                  â”‚  â”‚ "cites_evidence"â†’â”‚  â”‚ "evidence_use" â†’   â”‚     â”‚
â”‚  â”‚                    â”‚  â”‚   {evidence_use: â”‚  â”‚   {min: 0.0,       â”‚     â”‚
â”‚  â”‚ "reasoning" â†’ [    â”‚  â”‚    0.9}          â”‚  â”‚    max: 1.0,       â”‚     â”‚
â”‚  â”‚   cites_evidence   â”‚  â”‚                  â”‚  â”‚    default: 0.5}   â”‚     â”‚
â”‚  â”‚   logical_flow     â”‚  â”‚ ... 16 tags ...  â”‚  â”‚                    â”‚     â”‚
â”‚  â”‚   hasty_general...â”‚  â”‚                  â”‚  â”‚ "political_economic"â”‚     â”‚
â”‚  â”‚   circular_reason..â”‚ â”‚                  â”‚  â”‚   {min: -1.0,      â”‚     â”‚
â”‚  â”‚ ]                  â”‚  â”‚                  â”‚  â”‚    max: 1.0,       â”‚     â”‚
â”‚  â”‚                    â”‚  â”‚                  â”‚  â”‚    default: 0.0}   â”‚     â”‚
â”‚  â”‚ ... (more tags)    â”‚  â”‚                  â”‚  â”‚                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚  â˜ï¸  NEVER CHANGES - Loaded at backend startup                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VOTING FLOW (Request)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Frontend (battle.html / debate.html):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚ User clicks Vote button           â”‚                                      â”‚
â”‚  â”‚ Tag modal appears                 â”‚                                      â”‚
â”‚  â”‚ User selects tags:                â”‚                                      â”‚
â”‚  â”‚  â˜‘ empathetic                    â”‚                                      â”‚
â”‚  â”‚  â˜‘ cites_evidence                â”‚                                      â”‚
â”‚  â”‚  â˜‘ logical_flow                  â”‚                                      â”‚
â”‚  â”‚ (selected 3 tags from 16 total)  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â†“                                                                  â”‚
â”‚  POST /api/vote-with-tags                                                   â”‚
â”‚  {                                                                           â”‚
â”‚    "winner_model": "gpt-4o",                                                â”‚
â”‚    "loser_model": "gpt-3.5-turbo",                                          â”‚
â”‚    "tags": ["empathetic", "cites_evidence", "logical_flow"]               â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BACKEND PROCESSING (api.py)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. VALIDATE                                                                 â”‚
â”‚     For each tag, check: tag in TAGS_BY_CATEGORY? âœ… âœ… âœ…                â”‚
â”‚     All valid â†’ continue                                                     â”‚
â”‚                                                                              â”‚
â”‚  2. UPDATE RATINGS (elo.py)                                                 â”‚
â”‚     gpt-4o: 1500 â†’ 1508                                                     â”‚
â”‚     gpt-3.5-turbo: 1500 â†’ 1492                                              â”‚
â”‚                                                                              â”‚
â”‚  3. CALCULATE DIMENSION SCORES (tags.py)                                    â”‚
â”‚     Selected tags: ["empathetic", "cites_evidence", "logical_flow"]       â”‚
â”‚                                                                              â”‚
â”‚     For each dimension:                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚ Dimension    â”‚ Calculation                                         â”‚ â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚     â”‚ empathy      â”‚ empathetic(0.8) / 1 = 0.8 â†’ map to 0.9            â”‚ â”‚
â”‚     â”‚ aggressiv.   â”‚ empathetic(-0.3) / 1 = -0.3 â†’ map to 0.35         â”‚ â”‚
â”‚     â”‚ evidence_use â”‚ (0.9 + 0.7)/2 = 0.8 â†’ map to 0.9                â”‚ â”‚
â”‚     â”‚ pol_econ     â”‚ no tags â†’ 0.0 (default)                            â”‚ â”‚
â”‚     â”‚ pol_social   â”‚ no tags â†’ 0.0 (default)                            â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚     Result: {                                                                â”‚
â”‚       "empathy": 0.9,                                                        â”‚
â”‚       "aggressiveness": 0.35,                                               â”‚
â”‚       "evidence_use": 0.9,                                                  â”‚
â”‚       "political_economic": 0.0,                                            â”‚
â”‚       "political_social": 0.0                                               â”‚
â”‚     }                                                                        â”‚
â”‚                                                                              â”‚
â”‚  4. STORE TAGS (supabase_db.py)                                             â”‚
â”‚     For each tag, insert row:                                                â”‚
â”‚                                                                              â”‚
â”‚     vote_tags table:                                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚ idâ”‚winner      â”‚loser            â”‚tag_name       â”‚category    â”‚   â”‚
â”‚     â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚     â”‚ 1 â”‚gpt-4o      â”‚gpt-3.5-turbo    â”‚empathetic     â”‚tone        â”‚   â”‚
â”‚     â”‚ 2 â”‚gpt-4o      â”‚gpt-3.5-turbo    â”‚cites_evidence â”‚reasoning   â”‚   â”‚
â”‚     â”‚ 3 â”‚gpt-4o      â”‚gpt-3.5-turbo    â”‚logical_flow   â”‚reasoning   â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  5. STORE DIMENSION SCORES (supabase_db.py)                                 â”‚
â”‚                                                                              â”‚
â”‚     vote_dimension_scores table:                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚idâ”‚winner â”‚loser      â”‚w_empathyâ”‚w_aggrâ”‚w_evidâ”‚l_empathyâ”‚l_aggrâ”‚   â”‚
â”‚     â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚     â”‚1 â”‚gpt-4o â”‚gpt-3.5t..â”‚0.9      â”‚0.35  â”‚0.9   â”‚0.1      â”‚0.65   â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚     (Loser scores calculated as: 1.0 - winner_score)                       â”‚
â”‚     Winner empathy 0.9 â†’ Loser empathy 0.1                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATABASE STORAGE (Supabase)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Table 1: vote_tags                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Stores individual tag selections per vote                     â”‚        â”‚
â”‚  â”‚ 3 rows inserted for this vote (one per tag)                   â”‚        â”‚
â”‚  â”‚ Used to build tag frequency profiles                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                              â”‚
â”‚  Table 2: vote_dimension_scores                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Stores calculated dimension scores                            â”‚        â”‚
â”‚  â”‚ 1 row inserted per vote (contains all 5 dimensions)           â”‚        â”‚
â”‚  â”‚ Used to aggregate dimension profiles                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                              â”‚
â”‚  Table 3: elo_ratings (updated)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ gpt-4o: 1500 â†’ 1508 (winner)                                  â”‚        â”‚
â”‚  â”‚ gpt-3.5-turbo: 1500 â†’ 1492 (loser)                            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AGGREGATION (Analytics Queries)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  After 10+ votes, analytics queries aggregate:                              â”‚
â”‚                                                                              â”‚
â”‚  1. GET /api/dimension-scores â†’ Aggregates vote_dimension_scores            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚     â”‚ gpt-4o:                                                      â”‚       â”‚
â”‚     â”‚  - empathy: AVG(0.9, 0.87, 0.92, ...) = 0.89               â”‚       â”‚
â”‚     â”‚  - aggressiveness: AVG(0.35, 0.40, 0.32, ...) = 0.36       â”‚       â”‚
â”‚     â”‚  - evidence_use: AVG(0.9, 0.88, 0.95, ...) = 0.91          â”‚       â”‚
â”‚     â”‚  - vote_count: 10                                           â”‚       â”‚
â”‚     â”‚                                                              â”‚       â”‚
â”‚     â”‚ gpt-3.5-turbo:                                              â”‚       â”‚
â”‚     â”‚  - empathy: AVG(0.1, 0.13, 0.08, ...) = 0.11               â”‚       â”‚
â”‚     â”‚  - aggressiveness: AVG(0.65, 0.60, 0.68, ...) = 0.64       â”‚       â”‚
â”‚     â”‚  - evidence_use: AVG(0.1, 0.12, 0.05, ...) = 0.09          â”‚       â”‚
â”‚     â”‚  - vote_count: 10                                           â”‚       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                              â”‚
â”‚  2. GET /api/tag-distribution/gpt-4o â†’ Aggregates vote_tags                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚     â”‚ Tag frequencies:                                             â”‚       â”‚
â”‚     â”‚  - empathetic: 0.35 (7 of 20 tags)                         â”‚       â”‚
â”‚     â”‚  - cites_evidence: 0.28 (5 of 20 tags)                     â”‚       â”‚
â”‚     â”‚  - logical_flow: 0.22 (4 of 20 tags)                       â”‚       â”‚
â”‚     â”‚  - balanced: 0.15 (3 of 20 tags)                           â”‚       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                              â”‚
â”‚  3. GET /api/dimension-leaderboard/empathy?limit=10 â†’ Ranks models          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚     â”‚ #1: gpt-4o â†’ 0.89 empathy                                  â”‚       â”‚
â”‚     â”‚ #2: claude-3-sonnet â†’ 0.87 empathy                         â”‚       â”‚
â”‚     â”‚ #3: gemini-2.0-flash â†’ 0.81 empathy                        â”‚       â”‚
â”‚     â”‚ ... (7 more models)                                         â”‚       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FRONTEND DISPLAY (Analytics)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Tag Analytics Dashboard (tag-analytics.html):                              â”‚
â”‚                                                                              â”‚
â”‚  Quality Dimensions Section:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ðŸ’œ Empathy                                                   â”‚          â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”               â”‚          â”‚
â”‚  â”‚ â”‚ gpt4oâ”‚ â”‚claudeâ”‚ â”‚geminiâ”‚ â”‚openaiâ”‚ â”‚meta  â”‚ ...           â”‚          â”‚
â”‚  â”‚ â”‚ 0.89 â”‚ â”‚ 0.87 â”‚ â”‚ 0.81 â”‚ â”‚ 0.75 â”‚ â”‚ 0.72 â”‚               â”‚          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜               â”‚          â”‚
â”‚  â”‚ Leaderboard:                                                â”‚          â”‚
â”‚  â”‚ #1 gpt-4o         0.89                                      â”‚          â”‚
â”‚  â”‚ #2 claude-3       0.87                                      â”‚          â”‚
â”‚  â”‚ #3 gemini         0.81                                      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚  Model Comparison:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ gpt-4o          vs        gpt-3.5-turbo                      â”‚          â”‚
â”‚  â”‚ â”œâ”€ Empathy    â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€ Empathy  â”€â”€â”€â”€â”€â”€â”¤               â”‚          â”‚
â”‚  â”‚ â”œâ”€ Aggressiv  â”€â”€â”€â”¤        â”œâ”€ Aggressiv â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
â”‚  â”‚ â”œâ”€ Evidence   â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€ Evidence  â”€â”€â”€â”¤                 â”‚          â”‚
â”‚  â”‚ â””â”€ Pol Econ   â”€â”€â”¤        â””â”€ Pol Econ   â”€â”€â”¤                 â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚  All data is REAL, aggregated from actual voter tags & assessments âœ…      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Dimension Score Calculation Algorithm

```
STEP 1: Collect Weights
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Selected tags: ["empathetic", "cites_evidence", "logical_flow"]           â”‚
â”‚                                              â”‚
â”‚ DIMENSION_WEIGHTS mapping:                   â”‚
â”‚                                              â”‚
â”‚ "empathetic" â†’ {                             â”‚
â”‚   "empathy": 0.8,                           â”‚
â”‚   "aggressiveness": -0.3                    â”‚
â”‚ }                                           â”‚
â”‚                                              â”‚
â”‚ "cites_evidence" â†’ {                         â”‚
â”‚   "evidence_use": 0.9                       â”‚
â”‚ }                                           â”‚
â”‚                                              â”‚
â”‚ "logical_flow" â†’ {                           â”‚
â”‚   "evidence_use": 0.7                       â”‚
â”‚ }                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 2: Aggregate by Dimension
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ empathy: [0.8]               count=1        â”‚
â”‚ aggressiveness: [-0.3]       count=1        â”‚
â”‚ evidence_use: [0.9, 0.7]     count=2        â”‚
â”‚ political_economic: []       count=0        â”‚
â”‚ political_social: []         count=0        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 3: Calculate Averages
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ empathy: 0.8 / 1 = 0.8                     â”‚
â”‚ aggressiveness: -0.3 / 1 = -0.3            â”‚
â”‚ evidence_use: (0.9 + 0.7) / 2 = 0.8        â”‚
â”‚ political_economic: 0 / 0 = 0.0 (default)  â”‚
â”‚ political_social: 0 / 0 = 0.0 (default)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 4: Map to Dimension Ranges
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For each dimension with avg_weight:                            â”‚
â”‚                                                                â”‚
â”‚ if avg_weight >= 0:                                            â”‚
â”‚   score = default + (avg_weight Ã— (max - default))             â”‚
â”‚ else:                                                           â”‚
â”‚   score = default + (avg_weight Ã— (default - min))             â”‚
â”‚                                                                â”‚
â”‚ empathy (min=0.0, max=1.0, default=0.5):                      â”‚
â”‚   avg_weight = 0.8 â‰¥ 0                                        â”‚
â”‚   score = 0.5 + (0.8 Ã— (1.0 - 0.5)) = 0.5 + 0.4 = 0.9 âœ…    â”‚
â”‚                                                                â”‚
â”‚ aggressiveness (min=0.0, max=1.0, default=0.5):               â”‚
â”‚   avg_weight = -0.3 < 0                                       â”‚
â”‚   score = 0.5 + (-0.3 Ã— (0.5 - 0.0)) = 0.5 - 0.15 = 0.35 âœ… â”‚
â”‚                                                                â”‚
â”‚ evidence_use (min=0.0, max=1.0, default=0.5):                 â”‚
â”‚   avg_weight = 0.8 â‰¥ 0                                        â”‚
â”‚   score = 0.5 + (0.8 Ã— (1.0 - 0.5)) = 0.5 + 0.4 = 0.9 âœ…    â”‚
â”‚                                                                â”‚
â”‚ political_economic (min=-1.0, max=1.0, default=0.0):          â”‚
â”‚   avg_weight = 0.0 = 0                                        â”‚
â”‚   score = 0.0 + (0.0 Ã— ...) = 0.0 âœ…                          â”‚
â”‚                                                                â”‚
â”‚ political_social (min=-1.0, max=1.0, default=0.0):            â”‚
â”‚   avg_weight = 0.0 = 0                                        â”‚
â”‚   score = 0.0 + (0.0 Ã— ...) = 0.0 âœ…                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FINAL RESULT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                            â”‚
â”‚   "empathy": 0.9,           â”‚
â”‚   "aggressiveness": 0.35,   â”‚
â”‚   "evidence_use": 0.9,      â”‚
â”‚   "political_economic": 0.0,â”‚
â”‚   "political_social": 0.0   â”‚
â”‚ }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## When Do Tags Get "Initialized"?

### Timeline for a New Model (e.g., "gpt-4o")

```
Before First Vote:
  gpt-4o: Not in any database table
  Status: Doesn't exist in system yet
  
First Vote (gpt-4o wins):
  âœ… Model created in elo_ratings (1500 rating)
  âœ… 3 tags added to vote_tags table (for vote)
  âœ… Dimension scores added to vote_dimension_scores
  âœ… Now in database with profile beginning to form
  
After 5 Votes:
  âœ… elo_ratings: Shows current Elo score
  âœ… vote_tags: 15 total tag records across 5 votes
  âœ… vote_dimension_scores: 5 dimension records
  âœ… Analytics can aggregate and show initial profile
  
After 20+ Votes:
  âœ… Clear dimension score profile forms
  âœ… Tag frequency distribution stabilizes
  âœ… Leaderboards include model with meaningful rankings
  âœ… Model comparison shows real voter-assessed characteristics
```

---

## Key Takeaways

### âŒ NOT Pre-initialized
- Models don't have predefined tag profiles
- No "artificial" data injected
- No default tag distributions

### âœ… Dynamically Built
- First appearance: Model created on first vote
- Tags collected as votes occur
- Scores calculated from voter-selected tags
- Profiles build through aggregation

### âœ… Voter-Driven
- Voters select tags (16 to choose from)
- Backend calculates impact on dimensions
- Multiple votes aggregate into profiles
- Analytics show voter consensus patterns

### âœ… Data-Driven Analytics
- All displayed metrics come from real votes
- No mock data generation
- Profiles update in real-time as votes come in
- Leaderboards reflect actual voter assessments
